(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{151:function(t,e,n){var content=n(155);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(54).default)("ca081602",content,!0,{sourceMap:!1})},154:function(t,e,n){"use strict";var o=n(151);n.n(o).a},155:function(t,e,n){(t.exports=n(53)(!1)).push([t.i,".scollDiv{height:400px;overflow-y:scroll}",""])},161:function(t,e,n){"use strict";n.r(e);n(70),n(55);!firebase.apps.length&&firebase.initializeApp({apiKey:"AIzaSyBF6T-HeFPb1cLfq-jFfIpj2So7RbwViGo",authDomain:"testfirebase9999.firebaseapp.com",projectId:"testfirebase9999"});var o=firebase.firestore(),l=o.collection("users"),r=o.collection("messages"),c={middleware:"auth",data:function(){return{message:{text:"",name:"",created_at:""},userOnline:[],messages:[],userInfo:{}}},mounted:function(){},created:function(){var t=localStorage.getItem("key"),e=this;r.orderBy("created_at","asc").onSnapshot(function(t){e.messages=[],t.forEach(function(t){e.messages.push(t.data())})}),l.doc(t).get().then(function(t){t.exists&&(e.userInfo=t.data(),e.message.name=e.userInfo.username,l.where("online","==",1).onSnapshot(function(t){e.userOnline=[],t.forEach(function(t){var n=t.data();console.log(n.email,e.userInfo.email),n.email!==e.userInfo.email&&e.userOnline.push(t.data())})}))}).catch(function(t){console.log("Error getting document:",t)})},methods:{onSend:function(){this.message.created_at=(new Date).getTime(),r.add(this.message).then(function(t){})},onLogout:function(){var t=localStorage.getItem("key");this.userInfo.online=0,l.doc(t).set(this.userInfo),localStorage.removeItem("key"),this.$router.replace("/user/login")}}},d=(n(154),n(18)),component=Object(d.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-3"},[n("div",{staticClass:"panel panel-primary"},[t._m(0),t._v(" "),n("div",{staticClass:"panel-body"},[n("ul",{staticClass:"list-group",attrs:{id:"listOnline"}},t._l(t.userOnline,function(e){return n("li",{key:e.email,staticClass:"list-group-item"},[t._v(t._s(e.username))])}),0)]),t._v(" "),n("div",{staticClass:"panel-footer"},[n("button",{staticClass:"btn btn-danger",attrs:{id:"btnLogout"},on:{click:this.onLogout}},[t._v("Log out")])])])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("div",{staticClass:"panel panel-primary"},[n("div",{staticClass:"panel-heading"},[n("i",{staticClass:"glyphicon glyphicon-user"}),t._v(" "),n("h6",{staticClass:"panel-title"},[t._v("Chat box")]),t._v(" "),n("div",{staticClass:"btn-group btn-group-xs pull-right"},[t._v("\n                                    Hello, "),n("span",{attrs:{id:"txtName"}},[t._v(t._s(t.userInfo.username))])])]),t._v(" "),n("div",{staticClass:"panel-body"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12 scollDiv",attrs:{id:"scollDiv"}},[n("table",{staticClass:"table table-hover",attrs:{id:"messageContainer"}},[t._m(1),t._v(" "),n("tbody",t._l(t.messages,function(e){return n("tr",{key:e.created_at},[n("td",[n("i",{staticClass:"glyphicon glyphicon-user"}),t._v(" "+t._s(e.name))]),t._v(" "),n("td",[t._v(t._s(e.text))])])}),0)])])])]),t._v(" "),n("div",{staticClass:"panel-footer"},[n("form",[n("div",{staticClass:"input-group input-group-sm"},[t._m(2),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.message.text,expression:"message.text"}],staticClass:"form-control",attrs:{type:"text",id:"txtText",placeholder:"Type your message here .."},domProps:{value:t.message.text},on:{input:function(e){e.target.composing||t.$set(t.message,"text",e.target.value)}}}),t._v(" "),n("span",{staticClass:"input-group-btn"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"btnSend"},on:{click:this.onSend}},[t._v("Send")])])])])])])])])])])])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"panel-heading"},[e("i",{staticClass:"glyphicon glyphicon-user"}),this._v(" "),e("h6",{staticClass:"panel-title"},[this._v("Online list")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("colgroup",[e("col",{attrs:{width:"20%"}}),this._v(" "),e("col",{attrs:{width:"80%"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"input-group-addon"},[e("i",{staticClass:"glyphicon glyphicon-pencil"})])}],!1,null,null,null);e.default=component.exports}}]);